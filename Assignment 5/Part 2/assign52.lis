                        .module assign52.c
                        .area data
 0000           _current_speed:
 0000                   .blkb 2
                        .area idata
 0000 0000              .word 0
                        .area data
 0002                   .dbfile M:\SYSC20~2\Assignments\ASSIGN~4\PART2~1/../lib/motor.c
 0002                   .dbsym s current_speed _current_speed I
 0002           _desired_speed:
 0002                   .blkb 2
                        .area idata
 0002 0000              .word 0
                        .area data
 0004                   .dbfile M:\SYSC20~2\Assignments\ASSIGN~4\PART2~1/../lib/motor.c
 0004                   .dbsym s desired_speed _desired_speed I
                        .area text
 0000                   .dbfile M:\SYSC20~2\Assignments\ASSIGN~4\PART2~1/../lib/motor.c
 0000                   .dbfunc e motor_init _motor_init fV
 0000           _motor_init::
 0000                   .dbline -1
 0000                   .dbline 24
 0000           ; // By Korey Conway and Tanzeel Rana
 0000           ; 
 0000           ; #include <hcs12dp256.h>
 0000           ; #include <stdio.h>
 0000           ; #include "../lib/motor.c"
 0000           ; #include "../lib/rti.c"
 0000           ; #include "../lib/keyboard.c"
 0000           ; #include "../lib/lcd.c"
 0000           ; 
 0000           ; void rti_each_second(void);
 0000           ; void rti_each_half(void);
 0000           ; void rti_each_quarter(void);
 0000           ; 
 0000           ; int speed = 15;
 0000           ; int temperature = 30;
 0000           ; 
 0000           ; int main()
 0000           ; {
 0000           ;       int pspeed = 0;
 0000           ;       char key;
 0000           ;       
 0000           ;       // Setup terminal
 0000           ;       setbaud(BAUD19K);
 0000           ;       
 0000                   .dbline 26
 0000           ;       keyboard_init();
 0000           ;       lcd_init();
 0000 1C00A180          bset 0xa1,#128
 0004                   .dbline 27
 0004           ;       motor_init();
 0004 1D00A480          bclr 0xa4,#0x80
 0008                   .dbline 28
 0008           ;       rti_init();
 0008 1D00A580          bclr 0xa5,#0x80
 000C                   .dbline 29
 000C           ;       motor_set_speed(speed);
 000C C6FF              ldab #255
 000E 7B00A9            stab 0xa9
 0011                   .dbline 30
 0011           ;       INTR_ON();
 0011 C663              ldab #99
 0013 7B00BB            stab 0xbb
 0016                   .dbline 31
 0016           ;               
 0016 1D00A370          bclr 0xa3,#0x70
 001A                   .dbline 32
 001A           ;       lcd_display_speed(speed);
 001A 1C025A40          bset 0x25a,#64
 001E                   .dbline 33
 001E           ;       lcd_display_temperature(temperature); // Need to redisplay bottom line for some reason
 001E 1C025840          bset 0x258,#64
 0022                   .dbline 34
 0022           ; 
 0022 7900C3            clr 0xc3
 0025                   .dbline 35
 0025           ;       while ( 1 ) {
 0025 1C00A080          bset 0xa0,#128
 0029                   .dbline 36
 0029           ;               if ( key = keyboard_getchar() ) {
 0029                   ; vol
 0029 F60060            ldab 0x60
 002C 87                clra
 002D 84FF              anda #255
 002F C400              andb #0
 0031 8A00              ora #0
 0033 CA50              orb #80
 0035 7B0060            stab 0x60
 0038                   .dbline 37
 0038           ;                       if ( key == '0' ) {
 0038 CC0000            ldd #0
 003B 7C0062            std 0x62
 003E                   .dbline -2
 003E                   .dbline 38
 003E           ;                               break;
 003E           L3:
 003E                   .dbline 0 ; func end
 003E 3D                rts
 003F                   .dbend
 003F                   .dbfunc s motor_set_duty _motor_set_duty fV
 003F           ;           duty -> 2,x
 003F           _motor_set_duty:
 003F 3B                pshd
 0040 34                pshx
 0041 B775              tfr s,x
 0043                   .dbline -1
 0043                   .dbline 44
 0043           ;                       } else if ( key == 'E' ) {
 0043           ;                               ++speed;
 0043           ;                               motor_set_speed(speed);
 0043           ;                               printf("Increasing speed to %d\n", speed);
 0043           ;                               lcd_display_speed(speed);
 0043           ;                               lcd_display_temperature(temperature); // Need to redisplay bottom line for some reason
 0043                   .dbline 45
 0043           ;                       } else if ( key == 'D' ) {
 0043 EC02              ldd 2,x
 0045 2C05              bge L5
 0047                   .dbline 45
 0047                   .dbline 46
 0047           ;                               --speed;
 0047 7900C3            clr 0xc3
 004A                   .dbline 47
 004A 2013              bra L6
 004C           L5:
 004C                   .dbline 47
 004C           ;                               motor_set_speed(speed);
 004C EC02              ldd 2,x
 004E 8C0037            cpd #55
 0051 2F07              ble L7
 0053                   .dbline 47
 0053                   .dbline 48
 0053           ;                               printf("Decreasing speed to %d\n", speed);
 0053 C637              ldab #55
 0055 7B00C3            stab 0xc3
 0058                   .dbline 49
 0058 2005              bra L8
 005A           L7:
 005A                   .dbline 49
 005A           ;                               lcd_display_speed(speed);
 005A                   .dbline 50
 005A           ;                               lcd_display_temperature(temperature); // Need to redisplay bottom line for some reason
 005A EC02              ldd 2,x
 005C 7B00C3            stab 0xc3
 005F                   .dbline 51
 005F           ;                       } else {
 005F           L8:
 005F           L6:
 005F                   .dbline -2
 005F                   .dbline 52
 005F           ;                               printf("Pushed: %c\n", key);
 005F           L4:
 005F B757              tfr x,s
 0061 30                pulx
 0062 1B82              leas 2,sp
 0064                   .dbline 0 ; func end
 0064 3D                rts
 0065                   .dbsym l duty 2 I
 0065                   .dbend
                        .area data
 0004                   .dbfile M:\SYSC20~2\Assignments\ASSIGN~4\PART2~1/../lib/motor.c
 0004           L10:
 0004                   .blkb 2
                        .area idata
 0004 0000              .word 0
                        .area data
 0006                   .dbfile M:\SYSC20~2\Assignments\ASSIGN~4\PART2~1/../lib/motor.c
                        .area text
 0065                   .dbfile M:\SYSC20~2\Assignments\ASSIGN~4\PART2~1/../lib/motor.c
 0065                   .dbfunc e motor_update_speed _motor_update_speed fV
 0065                   .dbsym s count L10 I
 0065           ;     diff_speed -> -2,x
 0065           _motor_update_speed::
 0065 34                pshx
 0066 B775              tfr s,x
 0068 1B9E              leas -2,sp
 006A                   .dbline -1
 006A                   .dbline 55
 006A           ;                       }
 006A           ;               }
 006A           ;       }
 006A                   .dbline 57
 006A           ;       
 006A           ;       return 0;
 006A CC0000            ldd #0
 006D 6C1E              std -2,x
 006F                   .dbline 60
 006F           ; }
 006F           ; 
 006F           ; void rti_each()
 006F                   ; vol
 006F FC0062            ldd 0x62
 0072 59                lsld
 0073 59                lsld
 0074 FD0004            ldy L10
 0077 1941              leay 1,y
 0079 B7D6              exg x,y
 007B 1810              idiv
 007D B7D6              exg x,y
 007F 7D0000            sty _current_speed
 0082                   .dbline 61
 0082           ; {
 0082 FC0004            ldd L10
 0085 C30001            addd #1
 0088 CD0004            ldy #4
 008B B7D6              exg x,y
 008D 1815              idivs
 008F B7D6              exg x,y
 0091 7C0004            std L10
 0094                   .dbline 62
 0094           ;       //motor_update_speed();
 0094 FC0004            ldd L10
 0097 2606              bne L11
 0099                   .dbline 62
 0099                   .dbline 63
 0099           ; }
 0099 CC0000            ldd #0
 009C 7C0062            std 0x62
 009F                   .dbline 64
 009F           ; 
 009F           L11:
 009F                   .dbline 67
 009F           ; void rti_each_quarter()
 009F           ; {
 009F           ;       motor_update_speed();
 009F FC0002            ldd _desired_speed
 00A2 B30000            subd _current_speed
 00A5 6C1E              std -2,x
 00A7                   .dbline 68
 00A7           ; }
 00A7 EC1E              ldd -2,x
 00A9 2F0C              ble L13
 00AB                   .dbline 68
 00AB                   .dbline 69
 00AB           ; 
 00AB                   ; vol
 00AB F600C3            ldab 0xc3
 00AE 87                clra
 00AF C30001            addd #1
 00B2 16003F            jsr _motor_set_duty
 00B5                   .dbline 70
 00B5 200E              bra L14
 00B7           L13:
 00B7                   .dbline 70
 00B7           ; void rti_each_half()
 00B7 EC1E              ldd -2,x
 00B9 2C0A              bge L15
 00BB                   .dbline 70
 00BB                   .dbline 71
 00BB           ; {}
 00BB                   ; vol
 00BB F600C3            ldab 0xc3
 00BE 87                clra
 00BF 830001            subd #1
 00C2 16003F            jsr _motor_set_duty
 00C5                   .dbline 72
 00C5           ; 
 00C5           L15:
 00C5           L14:
 00C5                   .dbline -2
 00C5                   .dbline 74
 00C5           ; void rti_each_second()
 00C5           ; {}
 00C5           L9:
 00C5 B757              tfr x,s
 00C7 30                pulx
 00C8                   .dbline 0 ; func end
 00C8 3D                rts
 00C9                   .dbsym l diff_speed -2 I
 00C9                   .dbend
 00C9                   .dbfunc e motor_get_speed _motor_get_speed fI
 00C9           _motor_get_speed::
 00C9                   .dbline -1
 00C9                   .dbline 77
 00C9           ; {}
 00C9           ; {}
 00C9           ; {}
 00C9                   .dbline 78
 00C9           ; {}
 00C9 FC0000            ldd _current_speed
 00CC                   .dbline -2
 00CC           L17:
 00CC                   .dbline 0 ; func end
 00CC 3D                rts
 00CD                   .dbend
 00CD                   .dbfunc e motor_set_speed _motor_set_speed fV
 00CD           ;          speed -> 2,x
 00CD           _motor_set_speed::
 00CD 3B                pshd
 00CE 34                pshx
 00CF B775              tfr s,x
 00D1                   .dbline -1
 00D1                   .dbline 82
 00D1           ; {}
 00D1           ; {}
 00D1           ; {}
 00D1           ; {}
 00D1                   .dbline 83
 00D1 EC02              ldd 2,x
 00D3 8C000A            cpd #10
 00D6 2C07              bge L21
 00D8 EC02              ldd 2,x
 00DA 8C001E            cpd #30
 00DD 2E0F              bgt L19
 00DF           L21:
 00DF                   .dbline 83
 00DF           ; {}
 00DF                   .dbline 84
 00DF           ; {}
 00DF 1805020002        movw 2,x,_desired_speed
 00E4                   .dbline 86
 00E4           ; {}
 00E4           ; {}
 00E4 FC0000            ldd _current_speed
 00E7 2605              bne L22
 00E9                   .dbline 86
 00E9                   .dbline 87
 00E9           ; {}
 00E9 C619              ldab #25
 00EB 7B00C3            stab 0xc3
 00EE                   .dbline 88
 00EE           ; {}
 00EE           L22:
 00EE                   .dbline 89
 00EE           L19:
 00EE                   .dbline -2
 00EE                   .dbline 91
 00EE           ; {}
 00EE           ; {}
 00EE           ; {}
 00EE           L18:
 00EE B757              tfr x,s
 00F0 30                pulx
 00F1 1B82              leas 2,sp
 00F3                   .dbline 0 ; func end
 00F3 3D                rts
 00F4                   .dbsym l speed 2 I
 00F4                   .dbend
 00F4                   .dbfile M:\SYSC20~2\Assignments\ASSIGN~4\PART2~1/../lib/rti.c
 00F4                   .dbfunc e rti_init _rti_init fV
 00F4           _rti_init::
 00F4                   .dbline -1
 00F4                   .dbline 20
 00F4                   .dbline 21
 00F4 1C003880          bset 0x38,#128
 00F8                   .dbline 22
 00F8 C677              ldab #119
 00FA 7B003B            stab 0x3b
 00FD                   .dbline -2
 00FD                   .dbline 23
 00FD           L24:
 00FD                   .dbline 0 ; func end
 00FD 3D                rts
 00FE                   .dbend
                        .area data
 0006                   .dbfile M:\SYSC20~2\Assignments\ASSIGN~4\PART2~1/../lib/rti.c
 0006           L26:
 0006                   .blkb 2
                        .area idata
 0006 0000              .word 0
                        .area data
 0008                   .dbfile M:\SYSC20~2\Assignments\ASSIGN~4\PART2~1/../lib/rti.c
                        .area text
 00FE                   .dbfile M:\SYSC20~2\Assignments\ASSIGN~4\PART2~1/../lib/rti.c
 00FE                   .dbfunc e rti_isr _rti_isr fV
 00FE                   .dbsym s count L26 I
 00FE           _rti_isr::
 00FE                   .dbline -1
 00FE                   .dbline 30
 00FE                   .dbline 32
 00FE FC0006            ldd L26
 0101 C30001            addd #1
 0104 CD0008            ldy #8
 0107 B7D6              exg x,y
 0109 1815              idivs
 010B B7D6              exg x,y
 010D 7C0006            std L26
 0110                   .dbline 34
 0110 1603B3            jsr _rti_each
 0113                   .dbline 39
 0113 FC0006            ldd L26
 0116 CD0002            ldy #2
 0119 B7D6              exg x,y
 011B 1815              idivs
 011D B7D6              exg x,y
 011F 8C0000            cpd #0
 0122 2603              bne L27
 0124                   .dbline 39
 0124                   .dbline 40
 0124 1603B4            jsr _rti_each_quarter
 0127                   .dbline 41
 0127           L27:
 0127                   .dbline 44
 0127 FC0006            ldd L26
 012A CD0004            ldy #4
 012D B7D6              exg x,y
 012F 1815              idivs
 0131 B7D6              exg x,y
 0133 8C0000            cpd #0
 0136 2603              bne L29
 0138                   .dbline 44
 0138                   .dbline 45
 0138 1603B8            jsr _rti_each_half
 013B                   .dbline 46
 013B           L29:
 013B                   .dbline 48
 013B FC0006            ldd L26
 013E 2603              bne L31
 0140                   .dbline 48
 0140                   .dbline 49
 0140 1603B9            jsr _rti_each_second
 0143                   .dbline 50
 0143           L31:
 0143                   .dbline 53
 0143 1C003780          bset 0x37,#128
 0147                   .dbline -2
 0147                   .dbline 54
 0147           L25:
 0147                   .dbline 0 ; func end
 0147 0B                rti
 0148                   .dbend
                        .area data
 0008                   .dbfile M:\SYSC20~2\Assignments\ASSIGN~4\PART2~1/../lib/rti.c
 0008           _key:
 0008                   .blkb 1
                        .area idata
 0008 00                .byte 0
                        .area data
 0009                   .dbfile M:\SYSC20~2\Assignments\ASSIGN~4\PART2~1/../lib/rti.c
 0009                   .dbfile M:\SYSC20~2\Assignments\ASSIGN~4\PART2~1/../lib/keyboard.c
 0009                   .dbsym s key _key c
                        .area text
 0148                   .dbfile M:\SYSC20~2\Assignments\ASSIGN~4\PART2~1/../lib/keyboard.c
 0148                   .dbfunc e keyboard_init _keyboard_init fV
 0148           _keyboard_init::
 0148                   .dbline -1
 0148                   .dbline 21
 0148                   .dbline 22
 0148 7900F0            clr 0xf0
 014B                   .dbline 24
 014B 1C025208          bset 0x252,#8
 014F                   .dbline 26
 014F 1C025A0F          bset 0x25a,#15
 0153                   .dbline 27
 0153 1C025008          bset 0x250,#8
 0157                   .dbline 28
 0157 1C02580F          bset 0x258,#15
 015B                   .dbline 29
 015B 1D025008          bclr 0x250,#0x8
 015F                   .dbline 31
 015F 1D0262F0          bclr 0x262,#0xf0
 0163                   .dbline 32
 0163 1C0265F0          bset 0x265,#240
 0167                   .dbline 33
 0167 C6FF              ldab #255
 0169 7B0267            stab 0x267
 016C                   .dbline 34
 016C 790264            clr 0x264
 016F                   .dbline 35
 016F C6F0              ldab #240
 0171 7B0266            stab 0x266
 0174                   .dbline -2
 0174                   .dbline 36
 0174           L33:
 0174                   .dbline 0 ; func end
 0174 3D                rts
 0175                   .dbend
                        .area data
 0009                   .dbfile M:\SYSC20~2\Assignments\ASSIGN~4\PART2~1/../lib/keyboard.c
 0009           L35:
 0009                   .blkb 2
                        .area idata
 0009 3132              .byte 49,50
                        .area data
 000B                   .dbfile M:\SYSC20~2\Assignments\ASSIGN~4\PART2~1/../lib/keyboard.c
 000B                   .blkb 2
                        .area idata
 000B 3341              .byte 51,'A
                        .area data
 000D                   .dbfile M:\SYSC20~2\Assignments\ASSIGN~4\PART2~1/../lib/keyboard.c
 000D                   .blkb 2
                        .area idata
 000D 3435              .byte 52,53
                        .area data
 000F                   .dbfile M:\SYSC20~2\Assignments\ASSIGN~4\PART2~1/../lib/keyboard.c
 000F                   .blkb 2
                        .area idata
 000F 3642              .byte 54,'B
                        .area data
 0011                   .dbfile M:\SYSC20~2\Assignments\ASSIGN~4\PART2~1/../lib/keyboard.c
 0011                   .blkb 2
                        .area idata
 0011 3738              .byte 55,56
                        .area data
 0013                   .dbfile M:\SYSC20~2\Assignments\ASSIGN~4\PART2~1/../lib/keyboard.c
 0013                   .blkb 2
                        .area idata
 0013 3943              .byte 57,'C
                        .area data
 0015                   .dbfile M:\SYSC20~2\Assignments\ASSIGN~4\PART2~1/../lib/keyboard.c
 0015                   .blkb 2
                        .area idata
 0015 4530              .byte 'E,48
                        .area data
 0017                   .dbfile M:\SYSC20~2\Assignments\ASSIGN~4\PART2~1/../lib/keyboard.c
 0017                   .blkb 2
                        .area idata
 0017 4644              .byte 'F,'D
                        .area data
 0019                   .dbfile M:\SYSC20~2\Assignments\ASSIGN~4\PART2~1/../lib/keyboard.c
                        .area text
 0175                   .dbfile M:\SYSC20~2\Assignments\ASSIGN~4\PART2~1/../lib/keyboard.c
 0175                   .dbfunc e keyboard_isr _keyboard_isr fV
 0175                   .dbsym s char_map L35 A[16:4:4]c
 0175           ;            row -> -6,x
 0175           ;       col_mask -> -4,x
 0175           ;            col -> -2,x
 0175           _keyboard_isr::
 0175 34                pshx
 0176 B775              tfr s,x
 0178 1B98              leas -8,sp
 017A                   .dbline -1
 017A                   .dbline 43
 017A                   .dbline 44
 017A CC0000            ldd #0
 017D 6C1A              std -6,x
 017F                   .dbline 45
 017F CC0000            ldd #0
 0182 6C1E              std -2,x
 0184                   .dbline 53
 0184 790266            clr 0x266
 0187                   .dbline 55
 0187                   ; vol
 0187 F60267            ldab 0x267
 018A 87                clra
 018B 47                asra
 018C 56                rorb
 018D 47                asra
 018E 56                rorb
 018F 47                asra
 0190 56                rorb
 0191 47                asra
 0192 56                rorb
 0193 6C1C              std -4,x
 0195                   .dbline 58
 0195 CC0000            ldd #0
 0198 6C1A              std -6,x
 019A           L36:
 019A                   .dbline 58
 019A                   .dbline 59
 019A 1C025008          bset 0x250,#8
 019E                   .dbline 60
 019E CC0001            ldd #1
 01A1 ED1A              ldy -6,x
 01A3 8D0000            cpy #0
 01A6 2704              beq X0
 01A8           X1:
 01A8 59                lsld
 01A9 0436FC            dbne y,X1
 01AC           X0:
 01AC 8400              anda #0
 01AE C40F              andb #15
 01B0 6C18              std -8,x
 01B2                   ; vol
 01B2 F60258            ldab 0x258
 01B5 87                clra
 01B6 84FF              anda #255
 01B8 C4F0              andb #240
 01BA AA18              ora -8,x
 01BC EA19              orb -7,x
 01BE 7B0258            stab 0x258
 01C1                   .dbline 61
 01C1 1D025008          bclr 0x250,#0x8
 01C5                   .dbline 63
 01C5 1F0260F02E        brclr 0x260,#240,L40
 01CA                   .dbline 63
 01CA                   .dbline 65
 01CA CC0000            ldd #0
 01CD 6C1E              std -2,x
 01CF           L42:
 01CF                   .dbline 65
 01CF                   .dbline 66
 01CF EC1C              ldd -4,x
 01D1 ED1E              ldy -2,x
 01D3 8D0000            cpy #0
 01D6 2705              beq X2
 01D8           X3:
 01D8 47                asra
 01D9 56                rorb
 01DA 0436FB            dbne y,X3
 01DD           X2:
 01DD 8400              anda #0
 01DF C401              andb #1
 01E1 8C0000            cpd #0
 01E4 2702              beq L46
 01E6                   .dbline 66
 01E6                   .dbline 67
 01E6 2020              bra L38
 01E8           L46:
 01E8                   .dbline 69
 01E8           L43:
 01E8                   .dbline 65
 01E8 EC1E              ldd -2,x
 01EA C30001            addd #1
 01ED 6C1E              std -2,x
 01EF                   .dbline 65
 01EF EC1E              ldd -2,x
 01F1 8C0004            cpd #4
 01F4 2DD9              blt L42
 01F6                   .dbline 70
 01F6 2010              bra L38
 01F8           L40:
 01F8                   .dbline 72
 01F8           L37:
 01F8                   .dbline 58
 01F8 EC1A              ldd -6,x
 01FA C30001            addd #1
 01FD 6C1A              std -6,x
 01FF                   .dbline 58
 01FF EC1A              ldd -6,x
 0201 8C0004            cpd #4
 0204 182DFF92          lblt L36
 0208           L38:
 0208                   .dbline 74
 0208 EC1E              ldd -2,x
 020A 8C0004            cpd #4
 020D 2C1D              bge L48
 020F EC1A              ldd -6,x
 0211 8C0004            cpd #4
 0214 2C16              bge L48
 0216                   .dbline 74
 0216                   .dbline 75
 0216 EC1A              ldd -6,x
 0218 59                lsld
 0219 59                lsld
 021A C30009            addd #L35
 021D 6C18              std -8,x
 021F EC1E              ldd -2,x
 0221 E318              addd -8,x
 0223 B7C6              xgdy
 0225 E640              ldab 0,y
 0227 7B0008            stab _key
 022A                   .dbline 77
 022A 2003              bra L49
 022C           L48:
 022C                   .dbline 77
 022C                   .dbline 78
 022C 790008            clr _key
 022F                   .dbline 79
 022F           L49:
 022F                   .dbline 81
 022F 1C025008          bset 0x250,#8
 0233                   .dbline 82
 0233 1C02580F          bset 0x258,#15
 0237                   .dbline 83
 0237 1D025008          bclr 0x250,#0x8
 023B                   .dbline 84
 023B C6FF              ldab #255
 023D 7B0267            stab 0x267
 0240                   .dbline 85
 0240 C6F0              ldab #240
 0242 7B0266            stab 0x266
 0245                   .dbline -2
 0245                   .dbline 86
 0245           L34:
 0245 B757              tfr x,s
 0247 30                pulx
 0248                   .dbline 0 ; func end
 0248 0B                rti
 0249                   .dbsym l row -6 I
 0249                   .dbsym l col_mask -4 I
 0249                   .dbsym l col -2 I
 0249                   .dbend
 0249                   .dbfunc e keyboard_getchar _keyboard_getchar fc
 0249           ;           temp -> -1,x
 0249           _keyboard_getchar::
 0249 34                pshx
 024A B775              tfr s,x
 024C 1B9E              leas -2,sp
 024E                   .dbline -1
 024E                   .dbline 92
 024E           ; H
 024E                   .dbline 93
 024E           ; H
 024E 18091F0008        movb _key,-1,x
 0253                   .dbline 94
 0253           ; H
 0253 790008            clr _key
 0256                   .dbline 95
 0256           ; H
 0256 E61F              ldab -1,x
 0258 87                clra
 0259                   .dbline -2
 0259           L50:
 0259 B757              tfr x,s
 025B 30                pulx
 025C                   .dbline 0 ; func end
 025C 3D                rts
 025D                   .dbsym l temp -1 c
 025D                   .dbend
 025D                   .dbfile M:\SYSC20~2\Assignments\ASSIGN~4\PART2~1/../lib/lcd.c
 025D                   .dbfunc e lcd_init _lcd_init fV
 025D           _lcd_init::
 025D                   .dbline -1
 025D                   .dbline 21
 025D                   .dbline 22
 025D 160000            jsr _Lcd2PP_Init
 0260                   .dbline -2
 0260                   .dbline 23
 0260           L51:
 0260                   .dbline 0 ; func end
 0260 3D                rts
 0261                   .dbend
 0261                   .dbfunc e lcd_print _lcd_print fV
 0261           ;          ?temp -> -2,x
 0261           ;        address -> 6,x
 0261           ;         string -> 2,x
 0261           _lcd_print::
 0261 3B                pshd
 0262 34                pshx
 0263 B775              tfr s,x
 0265 1B9E              leas -2,sp
 0267                   .dbline -1
 0267                   .dbline 29
 0267                   .dbline 30
 0267 EC06              ldd 6,x
 0269 87                clra
 026A 160000            jsr _LCD_instruction
 026D 2013              bra L54
 026F           L53:
 026F                   .dbline 31
 026F                   .dbline 32
 026F 1802021E          movw 2,x,-2,x
 0273 EC1E              ldd -2,x
 0275 C30001            addd #1
 0278 6C02              std 2,x
 027A ED1E              ldy -2,x
 027C E640              ldab 0,y
 027E 87                clra
 027F 160000            jsr _LCD_display
 0282                   .dbline 33
 0282           L54:
 0282                   .dbline 31
 0282 ED02              ldy 2,x
 0284 E740              tst 0,y
 0286 26E7              bne L53
 0288                   .dbline -2
 0288                   .dbline 34
 0288           L52:
 0288 B757              tfr x,s
 028A 30                pulx
 028B 1B82              leas 2,sp
 028D                   .dbline 0 ; func end
 028D 3D                rts
 028E                   .dbsym l address 6 I
 028E                   .dbsym l string 2 pc
 028E                   .dbend
 028E                   .dbfunc e lcd_print_top _lcd_print_top fV
 028E           ;         string -> 2,x
 028E           _lcd_print_top::
 028E 3B                pshd
 028F 34                pshx
 0290 B775              tfr s,x
 0292 1B9E              leas -2,sp
 0294                   .dbline -1
 0294                   .dbline 40
 0294                   .dbline 41
 0294 CC0000            ldd #0
 0297 6C80              std 0,sp
 0299 EC02              ldd 2,x
 029B 160261            jsr _lcd_print
 029E                   .dbline -2
 029E                   .dbline 42
 029E           L56:
 029E B757              tfr x,s
 02A0 30                pulx
 02A1 1B82              leas 2,sp
 02A3                   .dbline 0 ; func end
 02A3 3D                rts
 02A4                   .dbsym l string 2 pc
 02A4                   .dbend
 02A4                   .dbfunc e lcd_print_bottom _lcd_print_bottom fV
 02A4           ;         string -> 2,x
 02A4           _lcd_print_bottom::
 02A4 3B                pshd
 02A5 34                pshx
 02A6 B775              tfr s,x
 02A8 1B9E              leas -2,sp
 02AA                   .dbline -1
 02AA                   .dbline 48
 02AA                   .dbline 49
 02AA CC00C0            ldd #192
 02AD 6C80              std 0,sp
 02AF EC02              ldd 2,x
 02B1 160261            jsr _lcd_print
 02B4                   .dbline -2
 02B4                   .dbline 50
 02B4           L57:
 02B4 B757              tfr x,s
 02B6 30                pulx
 02B7 1B82              leas 2,sp
 02B9                   .dbline 0 ; func end
 02B9 3D                rts
 02BA                   .dbsym l string 2 pc
 02BA                   .dbend
 02BA                   .dbfunc e lcd_display_speed _lcd_display_speed fV
 02BA           ;         string -> -2,x
 02BA           ;          speed -> 2,x
 02BA           _lcd_display_speed::
 02BA 3B                pshd
 02BB 34                pshx
 02BC B775              tfr s,x
 02BE 1B9A              leas -6,sp
 02C0                   .dbline -1
 02C0                   .dbline 56
 02C0                   .dbline 58
 02C0 18020282          movw 2,x,2,sp
 02C4 CC0407            ldd #L59
 02C7 6C80              std 0,sp
 02C9 EC1E              ldd -2,x
 02CB 160000            jsr _sprintf
 02CE                   .dbline 59
 02CE EC1E              ldd -2,x
 02D0 16028E            jsr _lcd_print_top
 02D3                   .dbline -2
 02D3                   .dbline 60
 02D3           L58:
 02D3 B757              tfr x,s
 02D5 30                pulx
 02D6 1B82              leas 2,sp
 02D8                   .dbline 0 ; func end
 02D8 3D                rts
 02D9                   .dbsym l string -2 pc
 02D9                   .dbsym l speed 2 I
 02D9                   .dbend
 02D9                   .dbfunc e lcd_display_temperature _lcd_display_temperature fV
 02D9           ;         string -> -2,x
 02D9           ;           temp -> 2,x
 02D9           _lcd_display_temperature::
 02D9 3B                pshd
 02DA 34                pshx
 02DB B775              tfr s,x
 02DD 1B9A              leas -6,sp
 02DF                   .dbline -1
 02DF                   .dbline 66
 02DF                   .dbline 68
 02DF 18020282          movw 2,x,2,sp
 02E3 CC03F6            ldd #L61
 02E6 6C80              std 0,sp
 02E8 EC1E              ldd -2,x
 02EA 160000            jsr _sprintf
 02ED                   .dbline 69
 02ED EC1E              ldd -2,x
 02EF 1602A4            jsr _lcd_print_bottom
 02F2                   .dbline -2
 02F2                   .dbline 70
 02F2           L60:
 02F2 B757              tfr x,s
 02F4 30                pulx
 02F5 1B82              leas 2,sp
 02F7                   .dbline 0 ; func end
 02F7 3D                rts
 02F8                   .dbsym l string -2 pc
 02F8                   .dbsym l temp 2 I
 02F8                   .dbend
                        .area data
 0019                   .dbfile M:\SYSC20~2\Assignments\ASSIGN~4\PART2~1/../lib/lcd.c
 0019           _speed::
 0019                   .blkb 2
                        .area idata
 0019 000F              .word 15
                        .area data
 001B                   .dbfile M:\SYSC20~2\Assignments\ASSIGN~4\PART2~1/../lib/lcd.c
 001B                   .dbfile M:\SYSC20~2\Assignments\ASSIGN~4\PART2~1\assign52.c
 001B                   .dbsym e speed _speed I
 001B           _temperature::
 001B                   .blkb 2
                        .area idata
 001B 001E              .word 30
                        .area data
 001D                   .dbfile M:\SYSC20~2\Assignments\ASSIGN~4\PART2~1\assign52.c
 001D                   .dbsym e temperature _temperature I
                        .area text
 02F8                   .dbfile M:\SYSC20~2\Assignments\ASSIGN~4\PART2~1\assign52.c
 02F8                   .dbfunc e main _main fI
 02F8           ;          ?temp -> -4,x
 02F8           ;         pspeed -> -3,x
 02F8           ;            key -> -1,x
 02F8           _main::
 02F8 34                pshx
 02F9 B775              tfr s,x
 02FB 1B9A              leas -6,sp
 02FD                   .dbline -1
 02FD                   .dbline 18
 02FD                   .dbline 19
 02FD CC0000            ldd #0
 0300 6C1D              std -3,x
 0302                   .dbline 23
 0302 CC001A            ldd #26
 0305 160000            jsr _setbaud
 0308                   .dbline 25
 0308 160148            jsr _keyboard_init
 030B                   .dbline 26
 030B 16025D            jsr _lcd_init
 030E                   .dbline 27
 030E 160000            jsr _motor_init
 0311                   .dbline 28
 0311 1600F4            jsr _rti_init
 0314                   .dbline 29
 0314 FC0019            ldd _speed
 0317 1600CD            jsr _motor_set_speed
 031A                   .dbline 30
 031A 10EF                      cli
 031C           
 031C                   .dbline 32
 031C FC0019            ldd _speed
 031F 1602BA            jsr _lcd_display_speed
 0322                   .dbline 33
 0322 FC001B            ldd _temperature
 0325 1602D9            jsr _lcd_display_temperature
 0328 1820007C          lbra L64
 032C           L63:
 032C                   .dbline 35
 032C                   .dbline 36
 032C 160249            jsr _keyboard_getchar
 032F 6B1C              stab -4,x
 0331 180A1C1F          movb -4,x,-1,x
 0335 E71C              tst -4,x
 0337 276F              beq L66
 0339                   .dbline 36
 0339                   .dbline 37
 0339 E61F              ldab -1,x
 033B C130              cmpb #48
 033D 2602              bne L68
 033F                   .dbline 37
 033F                   .dbline 38
 033F 206B              bra L65
 0341           L68:
 0341                   .dbline 39
 0341 E61F              ldab -1,x
 0343 C145              cmpb #69
 0345 2628              bne L70
 0347                   .dbline 39
 0347                   .dbline 40
 0347 FC0019            ldd _speed
 034A C30001            addd #1
 034D 7C0019            std _speed
 0350                   .dbline 41
 0350 FC0019            ldd _speed
 0353 1600CD            jsr _motor_set_speed
 0356                   .dbline 42
 0356 1801800019        movw _speed,0,sp
 035B CC03DE            ldd #L72
 035E 160000            jsr _printf
 0361                   .dbline 43
 0361 FC0019            ldd _speed
 0364 1602BA            jsr _lcd_display_speed
 0367                   .dbline 44
 0367 FC001B            ldd _temperature
 036A 1602D9            jsr _lcd_display_temperature
 036D                   .dbline 45
 036D 2039              bra L71
 036F           L70:
 036F                   .dbline 45
 036F E61F              ldab -1,x
 0371 C144              cmpb #68
 0373 2628              bne L73
 0375                   .dbline 45
 0375                   .dbline 46
 0375 FC0019            ldd _speed
 0378 830001            subd #1
 037B 7C0019            std _speed
 037E                   .dbline 47
 037E FC0019            ldd _speed
 0381 1600CD            jsr _motor_set_speed
 0384                   .dbline 48
 0384 1801800019        movw _speed,0,sp
 0389 CC03C6            ldd #L75
 038C 160000            jsr _printf
 038F                   .dbline 49
 038F FC0019            ldd _speed
 0392 1602BA            jsr _lcd_display_speed
 0395                   .dbline 50
 0395 FC001B            ldd _temperature
 0398 1602D9            jsr _lcd_display_temperature
 039B                   .dbline 51
 039B 200B              bra L74
 039D           L73:
 039D                   .dbline 51
 039D                   .dbline 52
 039D E61F              ldab -1,x
 039F 87                clra
 03A0 6C80              std 0,sp
 03A2 CC03BA            ldd #L76
 03A5 160000            jsr _printf
 03A8                   .dbline 53
 03A8           L74:
 03A8           L71:
 03A8                   .dbline 54
 03A8           L66:
 03A8                   .dbline 55
 03A8           L64:
 03A8                   .dbline 35
 03A8 1820FF80          lbra L63
 03AC           L65:
 03AC                   .dbline 57
 03AC CC0000            ldd #0
 03AF                   .dbline -2
 03AF           L62:
 03AF B757              tfr x,s
 03B1 30                pulx
 03B2                   .dbline 0 ; func end
 03B2 3D                rts
 03B3                   .dbsym l pspeed -3 I
 03B3                   .dbsym l key -1 c
 03B3                   .dbend
 03B3                   .dbfunc e rti_each _rti_each fV
 03B3           _rti_each::
 03B3                   .dbline -1
 03B3                   .dbline 61
 03B3                   .dbline -2
 03B3                   .dbline 63
 03B3           L77:
 03B3                   .dbline 0 ; func end
 03B3 3D                rts
 03B4                   .dbend
 03B4                   .dbfunc e rti_each_quarter _rti_each_quarter fV
 03B4           _rti_each_quarter::
 03B4                   .dbline -1
 03B4                   .dbline 66
 03B4                   .dbline 67
 03B4 160065            jsr _motor_update_speed
 03B7                   .dbline -2
 03B7                   .dbline 68
 03B7           L78:
 03B7                   .dbline 0 ; func end
 03B7 3D                rts
 03B8                   .dbend
 03B8                   .dbfunc e rti_each_half _rti_each_half fV
 03B8           _rti_each_half::
 03B8                   .dbline -1
 03B8                   .dbline 71
 03B8                   .dbline -2
 03B8                   .dbline 71
 03B8           L79:
 03B8                   .dbline 0 ; func end
 03B8 3D                rts
 03B9                   .dbend
 03B9                   .dbfunc e rti_each_second _rti_each_second fV
 03B9           _rti_each_second::
 03B9                   .dbline -1
 03B9                   .dbline 74
 03B9                   .dbline -2
 03B9                   .dbline 74
 03B9           L80:
 03B9                   .dbline 0 ; func end
 03B9 3D                rts
 03BA                   .dbend
 03BA           L76:
 03BA 5075736865643A2025630A00  .byte 'P,'u,'s,'h,'e,'d,58,32,37,'c,10,0
 03C6           L75:
 03C6 44656372656173696E67207370656564  .byte 'D,'e,'c,'r,'e,'a,'s,'i,'n,'g,32,'s,'p,'e,'e,'d
 03D6 20746F2025640A00  .byte 32,'t,'o,32,37,'d,10,0
 03DE           L72:
 03DE 496E6372656173696E67207370656564  .byte 'I,'n,'c,'r,'e,'a,'s,'i,'n,'g,32,'s,'p,'e,'e,'d
 03EE 20746F2025640A00  .byte 32,'t,'o,32,37,'d,10,0
 03F6           L61:
 03F6 54656D70657261747572653A20256443  .byte 'T,'e,'m,'p,'e,'r,'a,'t,'u,'r,'e,58,32,37,'d,'C
 0406 00                .byte 0
 0407           L59:
 0407 53706565643A20256400      .byte 'S,'p,'e,'e,'d,58,32,37,'d,0
